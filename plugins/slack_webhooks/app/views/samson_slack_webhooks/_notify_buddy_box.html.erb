<% if @deploy.waiting_for_buddy? && @deploy.stage.send_slack_webhook_notifications? %>
  <slack-buddy-request-box default-buddy-request-message="<%= default_slack_message(@deploy) %>"
                     channels="<%= @deploy.stage.for_buddy_channels_names.join(', ') %>"
                     deploy="<%= @deploy.id %>" ></slack-buddy-request-box>

  <script type="text/ng-template" id="templates/buddy_request_box">
    <div ng-show="shouldDisplayFeedback()">
      <div class="alert" ng-class="successful ? 'alert-success' : 'alert-danger'">
        <span>{{ message }}</span>
      </div>
    </div>
    <div class="panel panel-info">
      <div class="panel-heading">
        <h3 class="panel-title">Request a buddy via Slack</h3>
      </div>
      <div class="panel-body">
        <div class="col-sm-10">
          <div class="mentions-input-box">
            <textarea id="buddy_request_box"></textarea>
          </div>
		  <em>This will send a buddy request to the <strong>{{ channels }}</strong> channels.</em>
        </div>
        <div class="col-sm-2">
          <button class="btn btn-primary" data-ng-click="notify()">Request a Buddy!</button>
        </div>
      </div>
    </div>
  </script>
<% end %>
