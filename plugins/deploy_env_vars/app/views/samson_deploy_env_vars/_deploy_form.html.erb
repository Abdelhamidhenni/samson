<fieldset>
  <legend>
    Specific Environment Variables for this deploy <%= additional_info SamsonEnv::HELP_TEXT %>
  </legend>

  <% current_vars = form.object.environment_variables %>
  <%= form.fields_for :environment_variables, current_vars << EnvironmentVariable.new do |fields| %>
    <div class="form-group">
      <div class="col-lg-3">
        <%= fields.text_field :name, class: "form-control", placeholder: "Name" %>
      </div>

      <div class="col-lg-5">
        <%# using a text area so users can resize them with browser controls %>
        <%= fields.text_area :value, class: "form-control", placeholder: "Value", rows: 1 %>
      </div>

      <% if fields.object.persisted? %>
        <div class="col-lg-1 checkbox">
          <%= link_to_history fields.object, counter: false %>
        </div>
        <div class="col-lg-1 checkbox">
          <%= fields.label :_destroy do %>
            <%= fields.check_box :_destroy if fields.object.persisted? %>
            Delete
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>
  <%= link_to "Add row", "#", class: "duplicate_previous_row" %> |
  <%= link_to "Paste", "#", class: "paste_env_variables" %>
</fieldset>
